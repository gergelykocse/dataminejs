<!DOCTYPE html>

<html>
<body>
<h2> Text mine 1.0 </h2>

<button onclick="code()" > Klick </button> <br>
<p> Copy the text here: </p><input id="field" maxlength="999999" size="100%"> <br> <br>
<p> Search for keyword: </p> <input id="param1" maxlength="50" size="50%"><br>
<p> Context of keyword </p><br> 
<p> Count of characters to display backwards from the beginning of the keyword: </p><input id="param2" maxlength="3" size="10%"><br>
<p> Count of characters to display after the beginning of the keyword: </p><input id="param3" maxlength="3" size="10%"><br>
<p id="list"> Result: </p> <br>

 
<script>
function code(){
 
var origin = field.value;
var arr = "";
var p1 = param1.value;
var p2 = param2.value;
var p3 = param3.value;
var index = 1;              

   if (origin != "") {

while (index > 0) {                  
   index = origin.indexOf(p1, index);
   arr += index + ",";
   index = index + 1;
  }
  
  }else { alert("Please enter some text!");
  }
  
var narr = arr.split(","); 
	
	narr.pop();
	narr.pop();

var result = "";
var i;

for (i=0; i < narr.length; i++) {
    result += 
	origin.slice(parseInt(narr[i])-parseInt(p2) , parseInt(narr[i])+parseInt(p3)) +
	"<br>";
  }

    document.getElementById("list").innerHTML = result;
   
   }

</script>
</body>
</html>
